<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-peripherals-and-interfaces/1.40-pin-ls-connector" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">40 pin 连接器 | Ubuntu Manual CN</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="40 pin 连接器 | Ubuntu Manual CN"><meta data-rh="true" name="description" content="GPIO"><meta data-rh="true" property="og:description" content="GPIO"><link data-rh="true" rel="icon" href="/ubuntu100-cn.github.io/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector"><link data-rh="true" rel="alternate" href="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector" hreflang="en"><link data-rh="true" rel="alternate" href="https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"外设与接口","item":"https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/"},{"@type":"ListItem","position":2,"name":"40 pin 连接器","item":"https://ubuntu100-cn.github.io/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector"}]}</script><link rel="alternate" type="application/rss+xml" href="/ubuntu100-cn.github.io/blog/rss.xml" title="Ubuntu Manual CN RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ubuntu100-cn.github.io/blog/atom.xml" title="Ubuntu Manual CN Atom Feed"><link rel="stylesheet" href="/ubuntu100-cn.github.io/assets/css/styles.a2f89494.css">
<script src="/ubuntu100-cn.github.io/assets/js/runtime~main.3d94605e.js" defer="defer"></script>
<script src="/ubuntu100-cn.github.io/assets/js/main.0ac12d7a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ubuntu100-cn.github.io/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ubuntu100-cn.github.io/"><div class="navbar__logo"><img src="/ubuntu100-cn.github.io/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ubuntu100-cn.github.io/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ubuntu100-cn.github.io/docs/Get familiar">Tutorial</a><a class="navbar__item navbar__link" href="/ubuntu100-cn.github.io/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/Get familiar"><span title="设备规格" class="linkLabel_WmDU">设备规格</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/intro"><span title="Tutorial Intro" class="linkLabel_WmDU">Tutorial Intro</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/set-up-your-device"><span title="设备设置" class="linkLabel_WmDU">设备设置</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ubuntu100-cn.github.io/docs/Update-Software/"><span title="更新软件" class="categoryLinkLabel_W154">更新软件</span></a><button aria-label="Collapse sidebar category &#x27;更新软件&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Update-Software/3.1.upgrade-ubuntu"><span title="将Canonical Ubuntu升级到最新版本" class="linkLabel_WmDU">将Canonical Ubuntu升级到最新版本</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Update-Software/3.2.Flash-using-Qualcomm-Launcher"><span title="使用Qualcomm Launcher刷写Canonical Ubuntu 24.04" class="linkLabel_WmDU">使用Qualcomm Launcher刷写Canonical Ubuntu 24.04</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/"><span title="外设与接口" class="categoryLinkLabel_W154">外设与接口</span></a><button aria-label="Collapse sidebar category &#x27;外设与接口&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/1.40-pin-ls-connector"><span title="40 pin 连接器" class="linkLabel_WmDU">40 pin 连接器</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/usb"><span title="USB" class="linkLabel_WmDU">USB</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/csi"><span title="摄像头串行接口（CSI）" class="linkLabel_WmDU">摄像头串行接口（CSI）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/hdmi"><span title="HDMI OUT" class="linkLabel_WmDU">HDMI OUT</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/displayport"><span title="DisplayPort" class="linkLabel_WmDU">DisplayPort</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/wifi-and-bluetooth"><span title="Wi-Fi 与蓝牙" class="linkLabel_WmDU">Wi-Fi 与蓝牙</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/fan"><span title="风扇" class="linkLabel_WmDU">风扇</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/led"><span title="LED" class="linkLabel_WmDU">LED</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/ethernet"><span title="以太网" class="linkLabel_WmDU">以太网</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/rtc-battery"><span title="RTC 电池接口" class="linkLabel_WmDU">RTC 电池接口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/m.2-key-m-connector"><span title="M.2 Key M 接口" class="linkLabel_WmDU">M.2 Key M 接口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/audio"><span title="音频" class="linkLabel_WmDU">音频</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/Prebuilt Sample Applications"><span title="预构建示例应用程序" class="linkLabel_WmDU">预构建示例应用程序</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/QDemo"><span title="Qualcomm® Qdemo" class="linkLabel_WmDU">Qualcomm® Qdemo</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/"><span title="应用开发与执行指南" class="categoryLinkLabel_W154">应用开发与执行指南</span></a><button aria-label="Collapse sidebar category &#x27;应用开发与执行指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Building AI Models/edge_impulse"><span title="构建 AI 模型" class="categoryLinkLabel_W154">构建 AI 模型</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Building AI Models/edge_impulse"><span title="Edge Impulse" class="linkLabel_WmDU">Edge Impulse</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Building AI Models/qualcomm_ai_hub"><span title="Qualcomm® AI Hub" class="linkLabel_WmDU">Qualcomm® AI Hub</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Framework-Driven AI Sample Execution/litert_tflite"><span title="基于框架的 AI 示例运行" class="categoryLinkLabel_W154">基于框架的 AI 示例运行</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Framework-Driven AI Sample Execution/litert_tflite"><span title="LiteRT / TFLite" class="linkLabel_WmDU">LiteRT / TFLite</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Framework-Driven AI Sample Execution/onnx"><span title="ONNX" class="linkLabel_WmDU">ONNX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Framework-Driven AI Sample Execution/llama_cpp"><span title="Llama.cpp" class="linkLabel_WmDU">Llama.cpp</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Framework-Driven AI Sample Execution/genie"><span title="Genie" class="linkLabel_WmDU">Genie</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Update JSON Config"><span title="Qualcomm® IM SDK" class="categoryLinkLabel_W154">Qualcomm® IM SDK</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Update JSON Config"><span title="配置示例应用程序" class="linkLabel_WmDU">配置示例应用程序</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Customize-Sample"><span title="定制现有的示例应用程序" class="linkLabel_WmDU">定制现有的示例应用程序</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Develop-app"><span title="开发你的第一个应用程序" class="linkLabel_WmDU">开发你的第一个应用程序</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Robotics-Sample-Applications/Robotics Sample Applications"><span title="Qualcomm® Intelligent Robotics (QIR) SDK" class="categoryLinkLabel_W154">Qualcomm® Intelligent Robotics (QIR) SDK</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/Robotics-Sample-Applications/Robotics Sample Applications"><span title="机器人示例应用程序" class="linkLabel_WmDU">机器人示例应用程序</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/Technologies"><span title="技术概览" class="linkLabel_WmDU">技术概览</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ubuntu100-cn.github.io/docs/Troubleshooting/troubleshooting"><span title="Troubleshooting" class="categoryLinkLabel_W154">Troubleshooting</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/linux-kernel"><span title="Linux 内核" class="linkLabel_WmDU">Linux 内核</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/datasheet"><span title="数据手册" class="linkLabel_WmDU">数据手册</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/development-regulatory-notice"><span title="开发监管公告" class="linkLabel_WmDU">开发监管公告</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/cybersecurity-certification-en"><span title="Open Network Ports on RUBIK Pi Linux System" class="linkLabel_WmDU">Open Network Ports on RUBIK Pi Linux System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ubuntu100-cn.github.io/docs/cybersecurity-certification"><span title="RUBIK Pi Linux System 开放网络端口" class="linkLabel_WmDU">RUBIK Pi Linux System 开放网络端口</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ubuntu100-cn.github.io/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/"><span>外设与接口</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">40 pin 连接器</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>40 pin 连接器</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="gpio">GPIO<a href="#gpio" class="hash-link" aria-label="Direct link to GPIO" title="Direct link to GPIO" translate="no">​</a></h2>
<p>魔方派 3 适配了 WiringRP（基于高性能 GPIO 编程库 WiringPi），推荐使用 WiringRP 来控制 GPIO，和对 GPIO 编程。关于 WiringRP 详细信息可访问 <a href="https://github.com/rubikpi-ai/WiringRP" target="_blank" rel="noopener noreferrer" class="">https://github.com/rubikpi-ai/WiringRP</a> 查看。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="引脚分布">引脚分布<a href="#引脚分布" class="hash-link" aria-label="Direct link to 引脚分布" title="Direct link to 引脚分布" translate="no">​</a></h3>
<p>下图是魔方派 3 40-pin 连接器的引脚默认功能，其中大部分引脚和开源开发板 40-pin 连接器引脚的默认功能兼容。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/40-pin-1b808ea51003e0739cfe4e7b8721f67a.jpg" width="1408" height="886" class="img_ev3q"></p>
<p>下表是 40-pin连接器支持的所有功能，图中蓝色字体表明默认功能。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-94-21fe4b787a7212f3363ba770cf072c16.jpg" width="1000" height="422" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用-gpio">使用 GPIO<a href="#使用-gpio" class="hash-link" aria-label="Direct link to 使用 GPIO" title="Direct link to 使用 GPIO" translate="no">​</a></h3>
<p>在魔方派 3 中可以使用 shell 命令，或使用编程语言来控制 GPIO。</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Shell 命令</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">WiringRP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">C</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>在魔方派 3 中执行下面的步骤控制 GPIO。</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>下面的命令需要 root 权限。</p><ul>
<li class="">使用 <code>sudo su</code> 命令切换到 root 权限用户。</li>
</ul></div></div><ul>
<li class="">
<p>使用 WiringRP 相关命令</p>
<p>使用前需按下面方法安装 WiringRP：</p>
<ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo apt update</span><br></span></code></pre></div></div>
<ol start="2">
<li class="">执行下面命令安装 WiringRP.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div>
<p>安装完成后可以使用下面命令操作 GPIO：</p>
<ul>
<li class="">查看 GPIO 状态</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gpio readall</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-98-542b47a176d1c22930f6d5845aabacfd.jpg" width="825" height="606" class="img_ev3q"></p>
<ul>
<li class="">设置 GPIO 模式</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gpio mode 15 in             # 将15号引脚模式置为输入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio pins                   # 查看更改之后的状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio mode 15 out            # 将15号引脚模式置为输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio pins                   # 查看更改之后的状态</span><br></span></code></pre></div></div>
<ul>
<li class="">设置引脚电平</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gpio write 15 1             # 将15号引脚置为高电平</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio read 15                # 读取更改后引脚状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio write 15 0             # 将15号引脚置为低电平</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpio read 15                # 读取更改后引脚状态</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>操作 <em>/sys/class/gpio</em> 下相关节点
GPIO 子系统的编号如下表。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250603-170502-c6ff5232aa97d20a7a3582c1422c27c0.jpg" width="797" height="598" class="img_ev3q"></p>
<ol>
<li class="">进入 <em>/sys/class/gpio</em> 目录：</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /sys/class/gpio</span><br></span></code></pre></div></div>
<ol start="2">
<li class="">将要控制的 GPIO 导出，如控制 13 号引脚 GPIO_24：</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 571 &gt; export</span><br></span></code></pre></div></div>
<ol start="3">
<li class="">进入到 gpio571 目录设置 GPIO 属性：</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd gpio571</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250603-174456-193d4cac6b6f63e5b3118cdc631eac89.jpg" width="649" height="124" class="img_ev3q"></p>
<ul>
<li class="">
<p>direction（方向）：</p>
<ul>
<li class="">输入：in</li>
<li class="">输出：out</li>
</ul>
</li>
<li class="">
<p>value（值）：</p>
<ul>
<li class="">低电平：0</li>
<li class="">高电平：1</li>
</ul>
</li>
<li class="">
<p>edge （中断边沿）：</p>
<ul>
<li class="">上升沿触发：rising</li>
<li class="">下降沿触发：falling</li>
<li class="">双边沿触发：both</li>
<li class="">禁用中断：none</li>
</ul>
</li>
</ul>
<ol start="4">
<li class="">如设置 13 号引脚输出高电平：</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo out &gt; direction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; value</span><br></span></code></pre></div></div>
<ol start="5">
<li class="">取消导出 13 号引脚到用户空间：</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 571 &gt; unexport</span><br></span></code></pre></div></div>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>WiringRP 库中提供了一系列的 API 函数，用更少的逻辑实现控制。</p><p>使用前需按下面方法安装 WiringRP：</p><ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo apt update</span><br></span></code></pre></div></div><ol start="2">
<li class="">执行下面命令安装 WiringRP.</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div><p>以下代码示例，代码将 13 号引脚设置为输出， 15 号引脚设置为输入，循环检测 15 号引脚的电平状态：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPi.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">wiringPiSetup</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">pinMode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OUTPUT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">pinMode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> INPUT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">digitalWrite</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HIGH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// On</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">digitalRead</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// On</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">delay</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// mS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">digitalWrite</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LOW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Off</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">digitalRead</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// On</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">delay</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1900</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div><p>在魔方派 3 中编译程序</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc gpio.c -o gpio -lwiringPi</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 13 和 15 号引脚使用杜邦线短接，测试 GPIO 电平控制和电平读取情况，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155538-8999a3f48867f5dacf81a22aff194792.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gpio</span><br></span></code></pre></div></div><p>程序运行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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oo6knoKWS3miiilkjKpMCY2P8QBwcfiCK6rwXYtPNc6n/ZInWASSRMtx5YVwOEA+rDBPTFReN4I7EafYLpptTBCoD/aPMByNzqB7M/XvigDlaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAtaLqMulXsN7bojyRhgA4JHII7fWobaaW0uIbi3cpLC4dGHYg5BqGP/Vr/nvTqANe+1+W7triFLKztvtTBrh4UIaUg55yTgZ5wMc1Ja+JbmCK132dnPcWabLe4ljJeIDJGOcHBJIyDisSigC7pup3GnaiL6PZJIQwdZBlZAwIYH65qza6tbx38jyafCllcw+RcW8JIBXOdwLE4YEAj6Vk0UAdDqmrN9i8m21mS8SQqrxyWojYquCu5sncQVA61TOv3Z8SHXAkQuGfcyYOwjbtKkZzgj3rKooA1rPW2trX7LLYWd3brK0sUc6sRETjOMEHHA4OelPt/El3HqV/fXMMF29/GYplmB2leOBtIxwoFY1FAGpfa3JeRW1utpa29pbyeaLeFWCOx6lskk8cdan1HxCL/T47NtJsIVhUrC8YfdGCcnGWPU+tYlFAGk+tXhu9PuoykU2nxRxRMg7J0Jz1680T6zLLFqUSW1vDHqMkckixqQEKEkbeeASxrNooAltpVguEleCOdV6xyZ2t9cEH9a0dV1sanDGj6bZwtHGsSSRb9yovQcsR39KyaKALi37DR2037PAVafz/ADin7wHaBtz/AHeM4qT7fHHoP9nQxssks/m3EhP3gowij2GSfqaz6KALml6lPpd008ARxJG0UkcgysiN1Uj0NWLvV2vPskAt7e0tbeTesUCkLuJGWJJJJwB37Vl0UAdLrniQy3+rLYwWiC7eSJruNCJJYi3A645AGeATWVpuqvYW9xbNbW91b3G0vFODjKnIIwQQetZ9FAF621SS2iu4ooIRHdujOpBOAj7wo56Zx78CoL26kvb64u5seZcStIwHQFjnj25qCigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9k=" width="376" height="204" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>以下代码示例，代码将 13 号引脚设置为输出， 15 号引脚设置为输入，循环检测 15 号引脚的电平状态：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> out_gpio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">571</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> in_gpio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">572</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> export_path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> export_command</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/export&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo %d &gt; %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> out_gpio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> export_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo %d &gt; %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> export_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">export_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> direction_path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/gpio%d/direction&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> out_gpio</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FILE </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">direction_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;w&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open GPIO direction file&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;out&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fclose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/gpio%d/direction&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    direction_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;w&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open GPIO direction file&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;in&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fclose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> value_in_path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> value_out_path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> cat_command</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/gpio%d/value&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> out_gpio</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_in_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_in_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/gpio%d/value&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cat %s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value_in_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FILE </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">value_out_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;w&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open GPIO value file&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fflush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fflush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fclose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value_out_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> unexport_path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> unexport_command</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/sys/class/gpio/unexport&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo %d &gt; %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> out_gpio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unexport_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo %d &gt; %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unexport_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unexport_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div><p>在魔方派 3 中编译程序：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc gpio.c -o gpio</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 13 和 15 号引脚使用杜邦线短接，测试 GPIO 电平控制和电平读取情况，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155538-2-8999a3f48867f5dacf81a22aff194792.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gpio</span><br></span></code></pre></div></div><p>程序运行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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DUPE95PavvhGyNHHRtqhSR7ZBx7VStdMv76OWWzs55o4sl2RCQv1NU6ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDe8IzSjXoYRK/lGO4YpuO3PkPzj1rAX7o+la+iavDpExmbTYbmcbgsjyOu0MpUjAODkE1QvZoZ7ppLa1S1iIGIkYsF49SSfegCCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDfsLHT4NHi1DUrW6ujczOqJC+zy40xvc8HPJxjgcHmqGv6adH1u6sN/mLEwKP/eVgGX8cEZ9629Mnurvw9bWum6hBaXNu80EwllWPdDKQ2fm6jIOcc9KzPFt/BqXiW7ubVt0Hyxo2PvBVC5+hIJHtQBj0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAX7LRtS1GGaeys5Zooc73UcLgZ6/SqFbvhGR/wDhIIY97bPLuG254z5EnOKwV+6PpQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAGro2tHR5WkjsLO4lydskwYlQVKkDDDggn86o3lwt1ctMltDbK2MRQghVwMcZJP61t6dZWFto0Woahp1xftcySBY4pCgiijxvfgHJye/HFZ3iHTBo+uXVgrl0iYGNj1KsAy598HB9xQBnUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAdTps73vh+3s7XVbfT7i2eaKXzpvL3wSEMcE9cEHI69KzfFeoQ6p4ju7q1JMBKpGSMbgqhc/jjP41Fp+h6nqkE1xY2jSxQ53vuVQMDJ6kZOOwrNoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKANzwizf8JFCm47fKuDjPGfIkrCX7o+lbGi67Joru8NhY3EhJxJcRszKCpUgEMOCCfzqhf3QvLt7hba3tgwA8q3Uqi4GOASaAK9FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAHR6dY2dvosN/d6VLqUlzJIRGsjKIoY8Bn+Xvk9+OKz/EemLpGvXVjG5eKMho2bqVZQwz74OPwrV06RdQ0CCxj1eHTZ7WSVHMshjEkEhBOCOuCD8ves3xTqMOq+Iru8ts+QxVIyRjKqoUH8cZ/GgDJooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA0bDRNR1OGWeygEkcedxMir0GTjJGeOeKzq2/CJP/CSQjPHlXH/oiSsNfuj6UALRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQBq6Rrk+js7W1rZSOSSJJoQ7LkYIB7Agnj3qlfXRvLp7gwQQbgB5cEYRBgY4Are0yxig0OG+bSP7SluHldlLMBFBHgMw2kcknqfTpzWb4l02PSdfurKFmaFCrRluu1lDAfhnH4UAZdFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAHUaYf7U0GCwj1L7DNZyShyQ4DwSYLDKg5wQeDwc1meJ9Rj1bxBd3sAIhYqkeepVVCg/jjP40UUAZVFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//2Q==" width="269" height="215" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>可使用 Python 的 periphery 库控制 GPIO，可在魔方派 3 中使用下面命令进行安装：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install python3-pip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apt install python3-periphery</span><br></span></code></pre></div></div><p>下方截取代码是使用 periphery 库操作 GPIO 的示例，其中将 13 号引脚设置为输出，15 号引脚设置为输入，循环检测 15 号引脚的电平状态。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> periphery </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> GPIO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">out_gpio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GPIO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">571</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;out&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">in_gpio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GPIO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">572</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;in&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pin_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;in_gpio level: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">pin_level</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pin_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> in_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;in_gpio level: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">pin_level</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> KeyboardInterrupt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> IOError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Error&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in_gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><p>将 13 和 15 号引脚使用杜邦线短接测试 GPIO 电平控制和电平读取情况，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><blockquote>
<p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p>
</blockquote></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155538-3-8999a3f48867f5dacf81a22aff194792.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 gpio.py</span><br></span></code></pre></div></div><p>程序运行结果如下：</p><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-112-16747d84a1d3edbbb586f3d1ceff94fd.jpg" width="389" height="213" class="img_ev3q"></p></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="i2c">I2C<a href="#i2c" class="hash-link" aria-label="Direct link to I2C" title="Direct link to I2C" translate="no">​</a></h2>
<p>I2C 是飞利浦公司在 20 世纪 80 年代开发的一种双向 2 线制总线，用于实现高效的 IC 间控制总线。总线上的每个设备都有其唯一的地址（由飞利浦公司领导的 I2C 总机构注册）。I2C 核心支持多控制器模式，以及 10 位目标地址和 10 位可扩展地址。关于 I2C 的更多信息，请参阅 <a href="https://www.i2c-bus.org/fileadmin/ftp/i2c_bus_specification_1995.pdf" target="_blank" rel="noopener noreferrer" class="">https://www.i2c-bus.org/fileadmin/ftp/i2c_bus_specification_1995.pdf</a></p>
<p>魔方派 3 适配了 WiringRP（基于高性能 GPIO 编程库 WiringPi ） ，推荐使用 WiringRP 来控制 I2C，和对 I2C 编程。关于 WiringRP 详细信息可访问 <a href="https://github.com/rubikpi-ai/WiringRP" target="_blank" rel="noopener noreferrer" class="">https://github.com/rubikpi-ai/WiringRP</a> 查看。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="引脚分布-1">引脚分布<a href="#引脚分布-1" class="hash-link" aria-label="Direct link to 引脚分布" title="Direct link to 引脚分布" translate="no">​</a></h3>
<p>下图是魔方派 3 40-pin 连接器的引脚默认功能，其中大部分引脚和开源开发板 40-pin 连接器引脚的默认功能兼容。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/40-pin-1b808ea51003e0739cfe4e7b8721f67a.jpg" width="1408" height="886" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>3 号引脚和 5 号引脚默认已设置配为 I2C1。</p></div></div>
<p>下表是 40-pin 连接器支持的所有功能，图中蓝色字体表明默认功能。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-109-21fe4b787a7212f3363ba770cf072c16.jpg" width="1000" height="422" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用-i2c">使用 I2C<a href="#使用-i2c" class="hash-link" aria-label="Direct link to 使用 I2C" title="Direct link to 使用 I2C" translate="no">​</a></h3>
<p>在魔方派 3 中可以使用 shell 命令，或使用编程语言来控制 I2C 总线。</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Shell 命令</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">WiringRP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">C</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>在魔方派 3 中执行下面步骤控制 I2C 总线。
使用 WiringRP 相关命令前使用下面方法安装：</p><ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span></code></pre></div></div><ol start="2">
<li class="">执行下面命令安装 WiringRP库。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div><ul>
<li class="">
<p>使用 WiringRP 相关命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gpio -x ads1115:100:10 aread 100     #通过 I2C 总线读取 ADS1115 设备的模拟信号值</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>使用 i2cdetect 工具</p>
<ul>
<li class="">
<p>查看 I2C1 接口上的设备：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">i2cdetect -a -y -r 1</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>读取地址为 0x38 设备的全部寄存器：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">i2cdump -f -y 1 0x38</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>向地址为 0x38 设备的 0x01 寄存器地址写入 0xaa：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">i2cset -f -y 1 0x38 0x01 0xaa</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>读取地址为 0x38 的设备，寄存器地址为0x01处的数值：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">i2cget -f -y 1 0x38 0x01</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
</ul><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 <code>i2cdetect</code> 等命令，可执行 <code>apt install i2c-tools</code> 命令进行安装。</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>WiringRP 库中提供了一系列的 API函数，用更少的逻辑实现控制。</p><p>使用前需按下面方法安装 WiringRP：</p><ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo apt update</span><br></span></code></pre></div></div><ol start="2">
<li class="">执行下面命令安装 WiringRP.</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div><p>以下代码示例，I2C1总线和地址为0x38的设备进行通信，向设备0x01地址处写入0xaa：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPi.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPiI2C.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">I2C_ADDRESS</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0x38</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">wiringPiSetup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wiringPiI2CSetup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> I2C_ADDRESS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">wiringPiI2CWriteReg8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x01</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xaa</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>魔方派 3 中编译程序：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc i2c.c -o i2c -lwiringPi</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 3 和 5 号引脚连接 I2C 传感器，验证 I2C 总线通信，如下图所示</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155532-2-fe85f70c432e3f563d1efc4644170b7a.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令运行程序：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./i2c</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>以下代码示例，I2C1 总线和地址为 0x38 的设备进行通信，向设备 0x01 地址处写入 0xaa：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdint.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;fcntl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/i2c-dev.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;sys/ioctl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">I2C_DEVICE_PATH</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;/dev/i2c-1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0x01</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0xaa</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">i2c_device </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> I2C_DEVICE_PATH</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i2c_file</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_device</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> O_RDWR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open I2C device&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> I2C_TENBIT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> I2C_RETRIES</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;i2cdetect addr : &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x7f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> I2C_SLAVE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to set I2C slave address&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x%x,&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i2c_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\r\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>在魔方派 3 中编译</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc i2c.c -o i2c</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 3 和 5 号引脚连接 I2C 传感器，验证 I2C 总线通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155532-3-fe85f70c432e3f563d1efc4644170b7a.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./i2c</span><br></span></code></pre></div></div><p>程序运行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="362" height="58" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>可使用 Python 的 smbus 库控制 I2C，可在魔方派 3 中使用下面命令进行安装：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install python3-smbus</span><br></span></code></pre></div></div><p>以下代码示例，使用 I2C1 总线和地址为 0x38 的设备进行通信，向设备 0x01 地址处写入 0xaa：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> smbus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0x01</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xaa</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i2c_bus </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> smbus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SMBus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;i2cdetect addr : &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> address </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x7F</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                i2c_bus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write_i2c_block_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x{:02X},&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> OSError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;An error occurred: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> i2c_bus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i2c_bus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div><p>将 3 和 5 号引脚连接 I2C 传感器，验证 I2C 总线通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155532-1-fe85f70c432e3f563d1efc4644170b7a.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 i2c.py</span><br></span></code></pre></div></div><p>程序运行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="372" height="75" class="img_ev3q"></p></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="spi">SPI<a href="#spi" class="hash-link" aria-label="Direct link to SPI" title="Direct link to SPI" translate="no">​</a></h2>
<p>串行外设接口 (SPI) 是在全双工模式下工作的同步串行数据链路。SPI 又称为 4 线制串行总线。</p>
<p>魔方派 3 适配了 WiringRP（基于高性能 GPIO 编程库 WiringPi），推荐使用 WiringRP 来控制 SPI，和对 SPI 编程。关于 WiringRP 详细信息可访问 <a href="https://github.com/rubikpi-ai/WiringRP" target="_blank" rel="noopener noreferrer" class="">https://github.com/rubikpi-ai/WiringRP</a> 查看。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="引脚分布-2">引脚分布<a href="#引脚分布-2" class="hash-link" aria-label="Direct link to 引脚分布" title="Direct link to 引脚分布" translate="no">​</a></h3>
<p>下图是魔方派 3 40-pin 连接器的引脚默认功能，其中大部分引脚和开源开发板 40-pin 连接器引脚的默认功能兼容。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/40-pin-1b808ea51003e0739cfe4e7b8721f67a.jpg" width="1408" height="886" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>19 号、21 号、23 号、24 号引脚默认已设置配为 SPI。</p></div></div>
<p>下表是 40-pin 连接器支持的所有功能，图中蓝色字体表明默认功能。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-121-21fe4b787a7212f3363ba770cf072c16.jpg" width="1000" height="422" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用-spi">使用 SPI<a href="#使用-spi" class="hash-link" aria-label="Direct link to 使用 SPI" title="Direct link to 使用 SPI" translate="no">​</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">WiringRP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">C</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>WiringRP 库中提供了一系列的 API 函数，用更少的逻辑实现控制。</p><p>使用前需按下面方法安装 WiringRP：</p><ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo apt update</span><br></span></code></pre></div></div><ol start="2">
<li class="">执行下面命令安装 WiringRP.</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div><p>以下代码示例，代码使用 SPI 总线进行数据收发通信：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPi.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPiSPI.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> send_data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;hello world!&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> read_data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">wiringPiSetup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wiringPiSPISetup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rtx_buffer: \n %s\n &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> send_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Send and receive data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">wiringPiSPIDataRW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> send_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">send_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rtx_buffer: \n %s\n &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> send_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>编译程序</p><p>在魔方派 3 中编译</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc spi.c -o spi -lwiringPi</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 19 号引脚和 21 号引脚使用杜邦线短接，验证 SPI 总线通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><blockquote>
<p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p>
</blockquote></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155529-1-ebda72d74fd3eac3f07abfc02a5de947.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./spi</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="291" height="117" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>以下代码示例，代码使用 SPI 总线进行数据收发通信：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdint.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;fcntl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/spi/spidev.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;sys/ioctl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">SPI_DEVICE_PATH</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;/dev/spidev12.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> spi_file</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world!&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Open the SPI device</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPI_DEVICE_PATH</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> O_RDWR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open SPI device&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Configure SPI mode and bits per word</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SPI_MODE_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> bits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SPI_IOC_WR_MODE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to set SPI mode&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SPI_IOC_WR_BITS_PER_WORD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">bits</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to set SPI bits per word&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Perform SPI transfer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">spi_ioc_transfer</span><span class="token plain"> transfer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_buf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rx_buf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">rx_buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">len </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">delay_usecs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">speed_hz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// SPI speed in Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bits_per_word </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ioctl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SPI_IOC_MESSAGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">transfer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to perform SPI transfer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">/* Print tx_buffer and rx_buffer*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rtx_buffer: \n %s\n &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rrx_buffer: \n %s\n &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Close the SPI device</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spi_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>在魔方派 3 中编译</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc spi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">o spi</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 19 号引脚和 21 号引脚使用杜邦线短接，验证 SPI 总线通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155529-ebda72d74fd3eac3f07abfc02a5de947.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./spi</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="291" height="117" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>可使用 Python 的 spidev 库进行 SPI 通信，spidev 库可在魔方派 3 中使用下面命令进行安装：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install python3-spidev</span><br></span></code></pre></div></div><p>以下代码示例，代码使用 SPI 总线进行数据收发通信：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> spidev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tx_buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">ord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">char</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> char </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world!&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rx_buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spi </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spidev</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SpiDev</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_speed_hz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rx_buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xfer2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tx_buffer:\n\r&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">chr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;rx_buffer:\n\r&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">chr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;An error occurred: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> spi</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><p>将 19 号引脚和 21 号引脚使用杜邦线短接，验证 SPI 总线通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155529-3-ebda72d74fd3eac3f07abfc02a5de947.jpg" width="1000" height="750" class="img_ev3q"></p><p>在魔方派 3 中运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> python3 spi.py</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="410" height="118" class="img_ev3q"></p></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="uart">UART<a href="#uart" class="hash-link" aria-label="Direct link to UART" title="Direct link to UART" translate="no">​</a></h2>
<a id="UART"></a>
<p>魔方派 3 适配了 WiringRP（基于高性能 GPIO 编程库 WiringPi），推荐使用 WiringRP 来控制 UART，和对 UART 编程。关于 WiringRP 详细信息可访问 <a href="https://github.com/rubikpi-ai/WiringRP" target="_blank" rel="noopener noreferrer" class="">https://github.com/rubikpi-ai/WiringRP</a> 查看。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="引脚分布-3">引脚分布<a href="#引脚分布-3" class="hash-link" aria-label="Direct link to 引脚分布" title="Direct link to 引脚分布" translate="no">​</a></h3>
<p>下图是魔方派 3 40-pin 连接器的引脚默认功能，其中大部分引脚和开源开发板 40-pin 连接器引脚的默认功能兼容。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/40-pin-1b808ea51003e0739cfe4e7b8721f67a.jpg" width="1408" height="886" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><blockquote>
<p>8 号和 10 号引脚默认已设置配为 UART，设备节点为 <em>/dev/ttyHS2</em>。</p>
</blockquote></div></div>
<p>下表是 40-pin 连接器支持的所有功能，图中蓝色字体表明默认功能。</p>
<p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/image-117-21fe4b787a7212f3363ba770cf072c16.jpg" width="1000" height="422" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用-uart">使用 UART<a href="#使用-uart" class="hash-link" aria-label="Direct link to 使用 UART" title="Direct link to 使用 UART" translate="no">​</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Shell 命令</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">WiringRP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">C</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>在魔方派 3 中 使用下面命令控制串口通信</p><p>使用 stty 工具配置串口，如下将串口的输入速率和输出速率都设置为 115200，并关闭回显：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">stty -F /dev/ttyHS2 ispeed 115200 ospeed 115200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stty -F /dev/ttyHS2 -echo</span><br></span></code></pre></div></div><p>在魔方派 3 上开启两个终端，将 8 号引脚和 10 号引脚使用杜邦线短接，分别执行下面命令，接收端会回显发送端的内容：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;hello world!&quot; &gt; /dev/ttyHS2  # 发送端</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /dev/ttyHS2 # 接收端</span><br></span></code></pre></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155526-cfec1adfaf28d1698db4fcbcddccaaf4.jpg" width="1000" height="750" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>WiringRP 库中提供了一系列的 API 函数，用更少的逻辑实现控制。</p><p>使用前需按下面方法安装 WiringRP：</p><ol>
<li class="">将魔方派公共个人软件档案（PPA）添加到您的魔方派 3 Ubuntu 软件源。</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> REPO_ENTRY=&quot;deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if ! grep -q &quot;^[^#]*$REPO_ENTRY&quot; /etc/apt/sources.list; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo sed -i &#x27;$a deb http://apt.thundercomm.com/rubik-pi-3/noble ppa main&#x27; /etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudo apt update</span><br></span></code></pre></div></div><ol start="2">
<li class="">执行下面命令安装 WiringRP.</li>
</ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install wiringrp</span><br></span></code></pre></div></div><p>以下代码示例，使用UART进行数据收发通信：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;string.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;errno.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringPi.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wiringSerial.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fd </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> nextTime </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">serialOpen</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/dev/ttyHS2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">115200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">stderr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Unable to open serial device: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strerror</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errno</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">wiringPiSetup</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fprintf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">stdout</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Unable to start wiringPi: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strerror</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errno</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world!\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">serialPutchar</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">delay</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">serialGetchar</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>在魔方派 3 中编译程序</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc uart.c -o uart -lwiringPi</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 8 号引脚和 10 号引脚使用杜邦线短接，验证串口通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155526-1-cfec1adfaf28d1698db4fcbcddccaaf4.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./uart</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="287" height="58" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>以下代码示例，使用 UART 进行数据收发通信：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;string.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;fcntl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;termios.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> serial_port_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> serial_port</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;/dev/ttyHS%d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">serial_port_num</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> serial_fd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serial_fd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> O_RDWR </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> O_NOCTTY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to open serial port&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">termios</span><span class="token plain"> tty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tcgetattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Error from tcgetattr&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">cfsetospeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B9600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">cfsetispeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B9600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_cflag </span><span class="token operator" style="color:#393A34">&amp;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">~</span><span class="token plain">PARENB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_cflag </span><span class="token operator" style="color:#393A34">&amp;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">~</span><span class="token plain">CSTOPB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_cflag </span><span class="token operator" style="color:#393A34">&amp;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">~</span><span class="token plain">CSIZE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_cflag </span><span class="token operator" style="color:#393A34">|=</span><span class="token plain"> CS8</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tcsetattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TCSANOW</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Error from tcsetattr&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world!\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ssize_t</span><span class="token plain"> bytes_written </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bytes_written </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">perror</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Error writing to serial port&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rtx_buffer: \n %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> bytes_read </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bytes_read </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rx_buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">bytes_read</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token char">&#x27;\0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\rrx_buffer: \n %s &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rx_buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;No data received.\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serial_fd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div><p>在魔方派 3 中编译程序</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc uart.c -o uart</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>若无 gcc 命令，可执行 <code>apt install gcc</code> 命令进行安装。</p></div></div><p>将 8 号引脚和 10 号引脚使用杜邦线短接，验证串口通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155526-2-cfec1adfaf28d1698db4fcbcddccaaf4.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./uart</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="291" height="102" class="img_ev3q"></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>可使用 Python 的 serial 库进行 UART 通信，可在魔方派 3 中使用下面命令进行安装：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install python3-serial</span><br></span></code></pre></div></div><p>以下代码示例，使用 UART 进行数据收发通信：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> serial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serial</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;/dev/ttyHS2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baudrate</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">115200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytesize</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EIGHTBITS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stopbits</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">STOPBITS_ONE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PARITY_NONE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> uart3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uart3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">b&quot;Hello World!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uart3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Raw data:\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_strings </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> buf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;utf-8&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Read {:d} bytes, printed as string:\n {:s}&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_strings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><p>将 <em>uart.py </em>传输到魔方派 3 中，如果使用 ADB 传输，命令如下：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb push uart.py /opt</span><br></span></code></pre></div></div><p>将 8 号引脚和 10 号引脚使用杜邦线短接，验证串口通信，如下图所示：</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>注意引脚顺序，请勿将电源和地引脚短接，否则可能会造成板子损坏。</p></div></div><p><img decoding="async" loading="lazy" src="/ubuntu100-cn.github.io/assets/images/20250314-155526-3-cfec1adfaf28d1698db4fcbcddccaaf4.jpg" width="1000" height="750" class="img_ev3q"></p><p>运行如下命令：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 uart.py</span><br></span></code></pre></div></div><p>程序执行结果如下：</p><p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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Q6b4gvbGDeYYJti7jkkcd6m8QzznUbcXMNtE1tDHGI7eTzAqr0G7Jyce5qz4ytX/ALcutTjaKSzvJd0MkcituBUHoDkfiKAK+tWdhFp2mXunxzxrdiUsksgfG1gBggD1qHT9C1PUoPOs7YNGW2KzSKgZvRdxG4+wzV+5t3v/AAlpklqY3+w/aBcKZFDJlgwOCcnIz0z0qZrKTXPDujRafPAr2ZljnSSZY/KLMCJOTyCO4z0oA5uWKSGZ4pkZJEYqysMFSOoNaHh/T4tU1F7OUuGe3laHacZkVCy59uKf4quoL3xNqFzasHhkmO1h0bHGfxxR4UuvsfinTJyQF+0KjEnAAb5SfyagCfS/D8rss+qQyR2j2E15GyOuXVFz745I61WtPDur3lolzBZlkdSyDeoZwOpVSdzD6A1019fWw0XX4Ypk82yK2tuwb78biONto+kRP40xIPt+r+H9Yt7q3SxtIIBOXmVTbmI5ddpOee2Bzn8aAOTsNNvNSkkjsYGmeJDI6ggELkDv15I4FWJdNfSryEazbFopASFhuEJPb7w3AYPatHQ7yMXPiO4icRCawuPLycH5mGAPfFc3nGD6c4oA0vEdjBpuvXdnbF/JiZdu85OCoPJ/Gr+meFr2W4Rr+2eO2aCSUlXXeuI2ZSy5JUEgdQOvvTvFsLf22+rr5ctjcvE0bpIrbvkXIwDkdCORW2kBPi3UNZ+32/2G7tpmhfzlzLui4j25yMY7j+H6UAct4f0+DUpL5bguBb2Mtwm04+ZcYz7c1lVp6A9wkl79maFS1jKsnmttyhxnHq3TArMoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigCODo34VJUcHRvwqSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAjg6N+FSVHB0b6ity88NalYxzPdC3iMSlijTqHZQM5Vc5I+noaAMeiteDw3qc9rHPHFHmWMyxRNKolkTruVCckYGar6dpF3qMMk0PlJBEQryzSrGgJ6DJPX2oAoUVpxaJdDWxpd35dvMrDf5kgUYJHQng5B4qfWfD8thrD2VrLFOHuTBCiyq0hOcDcB0oAxaK6yz8M2d6z2lp9vnmVjEb5EH2YS/wB3pnbnjdn3xUcVrodppeiSX2nXE8mohvMkjuCpTD7eFwQTz0oA5eiuhudDtrT/AISOJnaVtNaNYXzj7z4OR64qSz0Wymt/Czurk6ndSxXHzdVWQKMenBoA5qiulv7LSrjT9XlsbCe0k0yRQHM5kSUGTZg5Awe/4GjTk0N/Dd1fXGkyyTWbQxsRdlRIXJBP3eOnTmgDmqK39N0FtV0MTWUTG6a/MOS3ypF5e4lvQD1qXTrHRr3xTaadbpLNZpHIJZS5U3DLGzbh/dGQMe31oA5uiuguLPTdQ8N3Wq6daS2UllLGkkbzeYsivwMHAwQe3pVS70w2ugwXjLG7Sz7RLHMrADZnaVHQ96AMqirNlY3N+0y2kRkMMTTSAfwoMZP6iq2eM0AFFamractj9hshG51B4w9wvJIZzlEx2IXGfdqde+HdSsrWW4mSJlgIE6xzK7Qk9NwByKAMmiti28NandW9vPEkIW6UtAHmVWlwSCFBOSeOnuPWneH9BOrXc0U0yQCJZNytIqOGVSRwe2Rz6c0AYtFXv7JvHvlsrcRXM7JvAhlVhj65xW9q/hOawsNQuRaSAW5hVG8wEcITK3XpnGPrQBydXYtI1OeJZYdNvJI3GVdIGII9jiqVe9eD/wDkUdK/69U/lQB4ZdWV3Zsq3lrNAW5USxlc/TNQV6J8X/8Aj80r/rnL/Na87oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAjt+/1Fb3jSdLvxTfywzJLG2wK6MCCBGo4I+lYMHRvwqSgDuEe1ufEGla+t/aR2dtBCZY2lAkiMa4KBOp5HGBjmsm0EeqeFm0+G4t7e5ivjceVNKI1dGTHBPGQeMehrnaKAN3Xrq3XWdPWKVJksLe3hkli5V2jA3FT3FaN0YbDx5FrT3VrLZTX/mh4plchWOclQcjGe/pXI0UAdlZSwaVqWkR6lfPZSaQ7JLAqMRKCxPmKRwQwIB9gOtNTxENJ0jw4YI7S5MKyGZGRWkT950DdUJHQ/jXPLrWprYGx+2SG22FPLbBwp7DPIH0qhQB1ois1utf021v4GTUI45bWWWYYbDh9rMejYJHPcVLHcW1lc+EdOku7d5LG5eS4eOQNGgeQEfN06A59K42igDutWu7iWw1hdc1W1u7ZwxsY450ldZN3yEbegx1z2rP0vTWfwjqEP23T0lvHgkiR7uNThSxOQTweRwa5WigDqNK1qfRvCjfY7lFuP7UDPEGGZEEY4I7qSMVY05dNsPGljqNlc262FzFLMiu4/cExODG4PTDcDPUEVx9FAGjf63e6haJazeTHbo3mCGCFYl3YxkhQMmtd9LkHhJbX7XYecL0zlftkednl4z19e1cvRQBo6NFNNJdiDUUsStq7MzSlPNUEZj46k+ntUnhu1in1I3N0m6zsUNzPnoQvRf8AgTYH4msqnK7qjIrsFfG4A8NjpmgDSsdUY+KINW1A7ybpZpjj/aycD0HYe1bE0MWnPr99LqNpcpfRSRW4jmDySl5FYMVHK4Ayc965OigDsY7ETL4YvDf2tvHbQK8ollCMirM7bgD97OD05yPpVPTr+1uPG15dGRILe8a5VHk+VV3qwUn06isG4u5rmO3jlIK20XlR4GMLuLfzY1BQBv6BaWdh4ktrfWltZocBy63IKJj5skrkH7uNvuKs+JdW0+70y1ht7FUmuC97IyXJfy5JGwQRjk7UHXpmuXooAK968H/8ijpX/Xqn8q8Frr9M+IerabptvYwWtk0dvGI1Lq+SB64agDV+L/8Ax+aV/wBc5f5rXndbXiXxLeeJJbeS9igjNuGC+UCM5xnOSfSsWgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigCODo34VJUcHRvwqSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAjg6N+FSUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//2Q==" width="414" height="166" class="img_ev3q"></p></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/4.peripherals-and-interfaces/1.40-pin-ls-connector.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">外设与接口</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/usb"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">USB</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gpio" class="table-of-contents__link toc-highlight">GPIO</a><ul><li><a href="#引脚分布" class="table-of-contents__link toc-highlight">引脚分布</a></li><li><a href="#使用-gpio" class="table-of-contents__link toc-highlight">使用 GPIO</a></li></ul></li><li><a href="#i2c" class="table-of-contents__link toc-highlight">I2C</a><ul><li><a href="#引脚分布-1" class="table-of-contents__link toc-highlight">引脚分布</a></li><li><a href="#使用-i2c" class="table-of-contents__link toc-highlight">使用 I2C</a></li></ul></li><li><a href="#spi" class="table-of-contents__link toc-highlight">SPI</a><ul><li><a href="#引脚分布-2" class="table-of-contents__link toc-highlight">引脚分布</a></li><li><a href="#使用-spi" class="table-of-contents__link toc-highlight">使用 SPI</a></li></ul></li><li><a href="#uart" class="table-of-contents__link toc-highlight">UART</a><ul><li><a href="#引脚分布-3" class="table-of-contents__link toc-highlight">引脚分布</a></li><li><a href="#使用-uart" class="table-of-contents__link toc-highlight">使用 UART</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ubuntu100-cn.github.io/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ubuntu100-cn.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>