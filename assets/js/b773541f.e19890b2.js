"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5238],{3711:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"rubik-pi-3-user-manual/1.1.0/lvgl","title":"5. LVGL \u4f7f\u7528\u6307\u5357","description":"","source":"@site/docs/rubik-pi-3-user-manual/1.1.0/5.lvgl.md","sourceDirName":"rubik-pi-3-user-manual/1.1.0","slug":"/rubik-pi-3-user-manual/1.1.0/lvgl","permalink":"/ubuntu100-cn.github.io/docs/rubik-pi-3-user-manual/1.1.0/lvgl","draft":false,"unlisted":false,"editUrl":"https://github.com/rubikpi-ai/documentation/blob/main/docs-cn/docs/rubik-pi-3-user-manual/1.1.0/5.lvgl.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"","custom_edit_url":"https://github.com/rubikpi-ai/documentation/blob/main/docs-cn/docs/rubik-pi-3-user-manual/1.1.0/5.lvgl.md"},"sidebar":"tutorialSidebar","previous":{"title":"4. Qualcomm IM SDK","permalink":"/ubuntu100-cn.github.io/docs/rubik-pi-3-user-manual/1.1.0/qim.md"},"next":{"title":"6. QT5 \u4f7f\u7528\u6307\u5357","permalink":"/ubuntu100-cn.github.io/docs/rubik-pi-3-user-manual/1.1.0/qt5"}}');var r=s(74848),l=s(28453);const c={sidebar_position:5,description:"",custom_edit_url:"https://github.com/rubikpi-ai/documentation/blob/main/docs-cn/docs/rubik-pi-3-user-manual/1.1.0/5.lvgl.md"},a="5. LVGL \u4f7f\u7528\u6307\u5357",t={},d=[];function o(n){const e={a:"a",code:"code",em:"em",h1:"h1",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"5-lvgl-\u4f7f\u7528\u6307\u5357",children:"5. LVGL \u4f7f\u7528\u6307\u5357"})}),"\n",(0,r.jsx)(e.p,{children:"LVGL \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8f7b\u91cf\u7ea7\u56fe\u5f62\u5e93\uff0c\u4e0b\u9762\u4ee5 LVGL9.2 \u4e3a\u4f8b\uff0c\u8bf4\u660e\u4e00\u79cd\u5c06\u5176\u79fb\u690d\u5230Weston\u684c\u9762\u7684\u65b9\u6cd5\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5b8c\u6574\u5de5\u7a0b\uff0c\u53ef\u8bbf\u95ee ",(0,r.jsx)(e.a,{href:"https://github.com/rubikpi-ai/lvgl",children:"https://github.com/rubikpi-ai/lvgl"})," \u4e0b\u8f7d\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5173\u4e8eLVGL\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53ef\u8bbf\u95ee ",(0,r.jsx)(e.a,{href:"https://lvgl.io/",children:"https://lvgl.io/"})," \u67e5\u770b\u3002"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u514b\u9686\u9700\u8981\u7684\u4ee3\u7801\u5e93\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"git clone -b release/v9.2 https://github.com/lvgl/lvgl.git\r\ngit clone https://github.com/lvgl/lv_port_pc_vscode.git\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5c06 lvgl \u62f7\u8d1d\u5230 l",(0,r.jsx)(e.em,{children:"v_port_pc_vscode "}),"\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u66ff\u6362 ",(0,r.jsx)(e.em,{children:"lv_conf.h "}),"\u914d\u7f6e\u6587\u4ef6\uff0c\u540c\u65f6\u5230 ",(0,r.jsx)(e.em,{children:"main/src"})," \u4e0b\u521b\u5efa\u8f6f\u94fe\u63a5\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode\r\ncp ../lvgl . -r\r\ncp lvgl/lv_conf_template.h lv_conf.h\r\ncd main/src\r\nln -sf ../../lvgl\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4fee\u6539 ",(0,r.jsx)(e.em,{children:"lv_conf.h"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u80fd",(0,r.jsx)(e.em,{children:"lv_conf.h"}),"\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:'/* clang-format off */\r\n#if 1 /*Set it to "1" to enable content*/\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u4fee\u6539\u8272\u6df1\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_COLOR_DEPTH 32\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u589e\u52a0 LV_MEM_SIZE\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_MEM_SIZE (20U * 1024U * 1024U)\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e LV_USE_WAYLAND\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_USE_WAYLAND          1\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e LV_WAYLAND_WL_SHELL:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_WAYLAND_WL_SHELL             1\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e LV_USE_LINUX_DRM:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_USE_LINUX_DRM        1\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u4f7f\u80fd DEMO:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"#define LV_USE_DEMO_WIDGETS 1\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4fee\u6539 ",(0,r.jsx)(e.em,{children:"CMakeLists.txt"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6ce8\u91ca\u6389 SDL2\u5e93:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cmake",metastring:"showLineNumbers",children:"# Find and include SDL2 library\r\n# find_package(SDL2 REQUIRED)\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u589e\u52a0\u5934\u6587\u4ef6\u8def\u5f84\uff0c\u6309\u5b9e\u9645\u60c5\u51b5\u5bf9\u8def\u5f84\u8fdb\u884c\u4fee\u6539\uff0c\u5982\u4e0b ",(0,r.jsx)(e.em,{children:"/home/zhy/QCOM/sdk"})," \u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u5177\u4f53\u53ef\u53c2\u8003",(0,r.jsx)(e.a,{href:"/ubuntu100-cn.github.io/docs/rubik-pi-3-user-manual/1.1.0/quick-start#1122-%E4%BB%A3%E7%A0%81%E7%BC%96%E8%AF%91",children:"1.12.2 \u4ee3\u7801\u7f16\u8bd1"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cmake",metastring:"showLineNumbers",children:"target_include_directories(lvgl PUBLIC /home/zhy/QCOM/sdk/sysroots/armv8-2a-qcom-linux/usr/include/drm)\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6ce8\u91ca\u6389\u5982\u4e0b\u5185\u5bb9:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cmake",metastring:"showLineNumbers",children:'# Remove ARM-specific compile and linker options\r\n# set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -march=native")\r\n# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=native")\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e\u94fe\u63a5\u7684\u5e93\uff0c\u5982\u4e0b\u5c06\u539f target_link_libraries \u90e8\u5206\u8fdb\u884c\u66ff\u6362:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cmake",metastring:"showLineNumbers",children:"# Define LVGL configuration as a simple include\r\ntarget_compile_definitions(main PRIVATE LV_CONF_INCLUDE_SIMPLE)\r\ntarget_link_libraries(main lvgl lvgl::examples lvgl::demos lvgl::thorvg m pthread rt drmfs drm_etnaviv drm_nouveau drm_omap drmtime drm drmutils sdedrm xkbcommon wayland-client wayland-cursor wayland-egl EGL GLESv2)\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5177\u4f53\u53ef\u53c2\u8003 ",(0,r.jsx)(e.a,{href:"/ubuntu100-cn.github.io/docs/rubik-pi-3-user-manual/1.1.0/quick-start#1112-%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7",children:"1.11.2 \u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177"}),"\u5c0f\u8282:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"source <your toolchains directory>/environment-setup-armv8-2a-qcom-linux\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4fee\u6539 ",(0,r.jsx)(e.em,{children:"lv_port_pc_vscode/main/src/main.c"})," \u4e2d\u7684 hal_init \u51fd\u6570:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:'/**\r\n * Initialize the Hardware Abstraction Layer (HAL) for the LVGL graphics\r\n * library\r\n */\r\nstatic lv_display_t * hal_init(int32_t w, int32_t h)\r\n{\r\n        lv_disp_t * disp;\r\n        lv_group_set_default(lv_group_create());\r\n\r\n        lv_group_set_default(lv_group_create());\r\n        disp = lv_wayland_window_create(w, h, "Window Title", NULL);\r\n    // lv_wayland_window_set_fullscreen(disp, false);\r\n\r\n        lv_indev_t *kb = lv_wayland_get_keyboard(disp);\r\n        lv_indev_set_display(kb, disp);\r\n        lv_indev_set_group(kb, lv_group_get_default());\r\n\r\n        lv_display_set_default(disp);\r\n\r\n        return disp;\r\n}\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5c06 ",(0,r.jsx)(e.em,{children:"lv_port_pc_vscode/nvim main/src/main.c"})," \u4e2d main \u51fd\u6570\u4e2d while \u5faa\u73af\u8c03\u7528\u7684 lv_timer_handler \u6539\u4e3alv_wayland_timer_handler:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",metastring:"showLineNumbers",children:"while(1) {\r\n  /* Periodically call the lv_task handler.\r\n   * It could be done in a timer interrupt or an OS task too.*/\r\n  lv_wayland_timer_handler();\r\n  usleep(5 * 1000);\r\n}\r\n\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u5f00\u59cb\u7f16\u8bd1:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode\r\nmkdir build\r\ncd build\r\ncmake ..\r\nmake\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u7f16\u8bd1\u751f\u6210\u7269\u4f20\u8f93\u5230\u677f\u5b50\u4e2d\uff0c\u4ee5 ADB \u4f20\u8f93\u4e3a\u4f8b:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode/bin\r\nadb push main /opt\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8fde\u63a5 HDMI \u7ebf\u548c\u9f20\u6807\u952e\u76d8\uff0c\u5728 weston \u7ec8\u7aef\u4e2d\u8f93\u5165\u5982\u4e0b\uff0c\u8fd0\u884c LVGL \u7a0b\u5e8f\uff0c\u53ef\u7528\u9f20\u6807\u952e\u76d8\u63a7\u5236 UI \u754c\u9762:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd /opt\r\n./main\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:s(63913).A+"",width:"960",height:"1280"})}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>a});var i=s(96540);const r={},l=i.createContext(r);function c(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),i.createElement(l.Provider,{value:e},n.children)}},63913:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/img_v3_02gc_44d25839-f9ea-4f4f-ae1e-75894c32404g-be9eac4ff91bfe05d019af45b1876b09.jpg"}}]);