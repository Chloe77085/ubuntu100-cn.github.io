"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6637],{6298:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Application Development and Execution Guide/IMSDK/Customize-Sample","title":"\u5b9a\u5236\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f","description":"\u5bf9\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8c03\u8bd5\u548c\u4f18\u5316\uff0c\u4ee5\u6ee1\u8db3\u7279\u5b9a\u7684\u7528\u4f8b\u8981\u6c42\u3002\u672c\u8282\u5c06\u6307\u5bfc\u60a8\u5728\u8fd0\u884c Canonical Ubuntu \u7684\u9b54\u65b9\u6d3e 3 \u76ee\u6807\u8bbe\u5907\u4e0a\u4f7f\u7528 Qualcomm\xae \u667a\u80fd\u591a\u5a92\u4f53\u4ea7\u54c1 (QIMP) SDK \u4e0b\u8f7d\u3001\u6784\u5efa\u3001\u81ea\u5b9a\u4e49\u6e90\u4ee3\u7801\uff0c\u4ece\u800c\u5b8c\u5168\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\u884c\u4e3a\u5e76\u5b9e\u73b0\u8de8\u8fd0\u884c\u65f6\u73af\u5883\u7684\u6027\u80fd\u4f18\u5316\u3002","source":"@site/docs/7.Application Development and Execution Guide/3.IMSDK/2.Customize-Sample.md","sourceDirName":"7.Application Development and Execution Guide/3.IMSDK","slug":"/Application Development and Execution Guide/IMSDK/Customize-Sample","permalink":"/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Customize-Sample","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/7.Application Development and Execution Guide/3.IMSDK/2.Customize-Sample.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u914d\u7f6e\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f","permalink":"/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Update JSON Config"},"next":{"title":"\u5f00\u53d1\u4f60\u7684\u7b2c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f","permalink":"/ubuntu100-cn.github.io/docs/Application Development and Execution Guide/IMSDK/Develop-app"}}');var i=r(4848),l=r(8453);const t={},c="\u5b9a\u5236\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f",a={},d=[{value:"\u4ece\u6e90\u4ee3\u7801\u6784\u5efa",id:"\u4ece\u6e90\u4ee3\u7801\u6784\u5efa",level:2},{value:"\u53c2\u8003\u6587\u6863\uff1a",id:"\u53c2\u8003\u6587\u6863",level:3}];function o(n){const e={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u5b9a\u5236\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f",children:"\u5b9a\u5236\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u73b0\u6709\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8c03\u8bd5\u548c\u4f18\u5316\uff0c\u4ee5\u6ee1\u8db3\u7279\u5b9a\u7684\u7528\u4f8b\u8981\u6c42\u3002\u672c\u8282\u5c06\u6307\u5bfc\u60a8\u5728\u8fd0\u884c Canonical Ubuntu \u7684",(0,i.jsx)(e.strong,{children:"\u9b54\u65b9\u6d3e 3 \u76ee\u6807\u8bbe\u5907\u4e0a"}),"\u4f7f\u7528 Qualcomm\xae \u667a\u80fd\u591a\u5a92\u4f53\u4ea7\u54c1 (QIMP) SDK \u4e0b\u8f7d\u3001\u6784\u5efa\u3001\u81ea\u5b9a\u4e49\u6e90\u4ee3\u7801\uff0c\u4ece\u800c\u5b8c\u5168\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\u884c\u4e3a\u5e76\u5b9e\u73b0\u8de8\u8fd0\u884c\u65f6\u73af\u5883\u7684\u6027\u80fd\u4f18\u5316\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u9884\u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u9002\u5408\u5feb\u901f\u8bc4\u4f30\uff0c\u800c\u5b9a\u5236\u5316\u5f00\u53d1\u53ef\u5b9e\u73b0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u96c6\u6210\u81ea\u5df1\u7684",(0,i.jsx)(e.strong,{children:"\u6a21\u578b\u3001\u5a92\u4f53\u6216\u903b\u8f91"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u9488\u5bf9\u7279\u5b9a",(0,i.jsx)(e.strong,{children:"\u8fd0\u884c\u65f6\u76ee\u6807"}),"\uff08CPU\u3001GPU\u3001NPU\uff09\u4f18\u5316\u6027\u80fd"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6dfb\u52a0\u65b0\u529f\u80fd"}),"\u6216",(0,i.jsx)(e.strong,{children:"\u4fee\u6539\u73b0\u6709\u529f\u80fd"}),"\u4ee5\u7b26\u5408\u60a8\u7684\u7528\u4f8b"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528 GStreamer\u5c1d\u8bd5",(0,i.jsx)(e.strong,{children:"\u4e0d\u540c\u7684\u7ba1\u9053\u914d\u7f6e"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u4ece\u5de5\u4f5c\u57fa\u7ebf\u5f00\u59cb\u6784\u5efa",(0,i.jsx)(e.strong,{children:"\u53ef\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u5e94\u7528\u7a0b\u5e8f"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u524d\u63d0\u6761\u4ef6"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Ubuntu \u64cd\u4f5c\u7cfb\u7edf"})," \u5df2\u5237\u5165\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5177\u6709\u9002\u5f53\u6743\u9650\u7684",(0,i.jsx)(e.strong,{children:"\u7ec8\u7aef\u8bbf\u95ee"}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u60a8\u4e4b\u524d\u6ca1\u6709\u5b89\u88c5\u8fc7 PPA \u5305\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u5b89\u88c5\u3002","\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"  git clone -b ubuntu_setup --single-branch https://github.com/rubikpi-ai/rubikpi-script.git \r\n  cd rubikpi-script  \r\n  ./install_ppa_pkgs.sh \n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u4ece\u6e90\u4ee3\u7801\u6784\u5efa",children:"\u4ece\u6e90\u4ee3\u7801\u6784\u5efa"}),"\n",(0,i.jsx)(e.p,{children:"\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4e0b\u8f7d\u3001\u914d\u7f6e\u548c\u7f16\u8bd1\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u6e90\u4ee3\u7801\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u5e94\u7528\u7a0b\u5e8f\u884c\u4e3a\u5e76\u96c6\u6210\u81ea\u5b9a\u4e49\u903b\u8f91\u3002"}),"\n",(0,i.jsx)(e.p,{children:"1\ufe0f\u20e3\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5305\u4ee5\u4e0b\u8f7d\u6e90\u4ee3\u7801\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"sudo apt-add-repository -s ppa:ubuntu-qcom-iot/qcom-ppa\r\nsudo apt-get install adreno-dev\r\nsudo apt-get install gstreamer1.0-qcom-sample-apps-utils-dev\n"})}),"\n",(0,i.jsxs)(e.p,{children:["2\ufe0f\u20e3\u6784\u5efa\u4f9d\u8d56\u9879",(0,i.jsx)(e.br,{}),"\n","\u8fd0\u884c\u547d\u4ee4\u83b7\u53d6\u6e90\u4ee3\u7801\u7f16\u8bd1\u6240\u9700\u7684\u63d2\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"sudo apt build-dep gst-plugins-qti-oss\n"})}),"\n",(0,i.jsxs)(e.p,{children:["3\ufe0f\u20e3\u4e0b\u8f7d\u6e90\u4ee3\u7801",(0,i.jsx)(e.br,{}),"\n","\u4e0b\u8f7d\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u6e90\u4ee3\u7801"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cd /home/ubuntu\r\nsudo apt source gst-plugins-qti-oss\n"})}),"\n",(0,i.jsxs)(e.p,{children:["4\ufe0f\u20e3\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u8be6\u89e3",(0,i.jsx)(e.br,{}),"\n","\u4ee5 gst-ai-usb-camera-app \u4e3a\u4f8b\u8fdb\u884c\u4ee3\u7801\u8bb2\u89e3\u3002\u8fd9\u662f\u9ad8\u901a\u5f00\u53d1\u7684\u57fa\u4e8e GStreamer \u7684 C \u8bed\u8a00\u5e94\u7528\u7a0b\u5e8f\uff0c\u7528\u4e8e\u6f14\u793a\u5982\u4f55\u5c06 USB \u6444\u50cf\u5934\u7528\u4e8e\u4e0d\u540c\u7528\u9014\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u663e\u793a\u5668\u4e0a\u663e\u793a\u5b9e\u65f6\u89c6\u9891"}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u89c6\u9891\u4fdd\u5b58\u5230\u6587\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7 RTSP \u6d41\u5f0f\u4f20\u8f93\u89c6\u9891"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528 AI \u6a21\u578b\u8fd0\u884c\u5bf9\u8c61\u68c0\u6d4b"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"gst-ai-usb-camera-app \u7684\u6e90\u4ee3\u7801\u5728"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cd gst-plugins-qti-oss/gst-sample-apps/gst-ai-usb-camera-app\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u8be6\u7ec6\u4fe1\u606f"}),(0,i.jsx)(e.br,{}),"\n","a: \u5934\u6587\u4ef6\u548c\u5e38\u91cf"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"#include <glib-unix.h>\r\n#include <stdio.h>\r\n#include <gst/gst.h>\r\n#include <linux/videodev2.h>\r\n#include <sys/ioctl.h>\r\n#include <json-glib/json-glib.h>\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u548c\u5e38\u91cf\u63d0\u4f9b\u4ee5\u4e0b\u652f\u6301\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GLib\uff1a\u5b9e\u7528\u51fd\u6570\u548c\u4e3b\u5faa\u73af"}),"\n",(0,i.jsx)(e.li,{children:"GStreamer\uff1a\u591a\u5a92\u4f53\u6846\u67b6"}),"\n",(0,i.jsx)(e.li,{children:"Video4Linux2 (V4L2)\uff1a\u8bbf\u95ee USB \u6444\u50cf\u5934"}),"\n",(0,i.jsx)(e.li,{children:"JSON-GLib\uff1a\u4ece JSON \u8bfb\u53d6\u914d\u7f6e"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7136\u540e\u6211\u4eec\u5b9a\u4e49\u9ed8\u8ba4\u503c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'#define DEFAULT_WIDTH 1280\r\n#define DEFAULT_HEIGHT 720\r\n#define DEFAULT_FRAMERATE 30\r\n#define DEFAULT_OUTPUT_FILENAME "/etc/media/video.mp4"\r\n#define DEFAULT_IP "127.0.0.1"\r\n#define DEFAULT_PORT "8900"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u7528\u6237\u4e0d\u63d0\u4f9b\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u8fd9\u4e9b\u8bbe\u7f6e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["b. \u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587\u7ed3\u6784",(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"GstCameraAppCtx"}),(0,i.jsx)(e.br,{}),"\n","\u6b64\u7ed3\u6784\u4fdd\u5b58\u5e94\u7528\u7a0b\u5e8f\u7684\u72b6\u6001\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct GstCameraAppCtx {\r\n    GstElement *pipeline;\r\n    GMainLoop *mloop;\r\n    gchar *output_file;\r\n    gchar *ip_address;\r\n    gchar *port_num;\r\n    gchar *enable_ml;\r\n    gchar dev_video[16];\r\n    enum GstSinkType sinktype;\r\n    enum GstVideoFormat video_format;\r\n    gint width;\r\n    gint height;\r\n    gint framerate;\r\n};\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"GstAppOptions"}),(0,i.jsx)(e.br,{}),"\n","\u6b64\u7ed3\u6784\u4fdd\u5b58\u6765\u81ea\u914d\u7f6e\u6587\u4ef6\u7684\u7528\u6237\u5b9a\u4e49\u9009\u9879\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct {\r\n    gchar *file_path;\r\n    gchar *model_path;\r\n    gchar *labels_path;\r\n    gchar *constants;\r\n    gchar **snpe_layers;\r\n    GstCameraSourceType camera_type;\r\n    GstModelType model_type;\r\n    GstYoloModelType yolo_model_type;\r\n    gdouble threshold;\r\n    gint delegate_type;\r\n    gint snpe_layer_count;\r\n    gboolean use_cpu;\r\n    gboolean use_gpu;\r\n    gboolean use_dsp;\r\n} GstAppOptions;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["c. \u4ece JSON \u8bfb\u53d6\u914d\u7f6e",(0,i.jsx)(e.br,{}),"\n","\u51fd\u6570parse_json() \u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6,\u5e76\u5c06\u503c\u8bbe\u7f6e\u5230appctx\u548coptions\u3002",(0,i.jsx)(e.br,{}),"\n","\u914d\u7f6e\u793a\u4f8b\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'{\r\n  "width": 1280,\r\n  "height": 720,\r\n  "framerate": 30,\r\n  "output": "waylandsink",\r\n  "enable-object-detection": "TRUE",\r\n  "yolo-model-type": "yolov8",\r\n  "ml-framework": "tflite"\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4ee3\u7801\u7247\u6bb5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'if (json_object_has_member(root_obj, "width")) {\r\n    appctx->width = json_object_get_int_member(root_obj, "width");\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6b64\u4ee3\u7801\u5b9e\u73b0\u4ece\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u6444\u50cf\u5934\u5206\u8fa8\u7387\u5bbd\u5ea6\u53c2\u6570\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["d. \u67e5\u627e USB \u6444\u50cf\u5934",(0,i.jsx)(e.br,{}),"\n","\u51fd\u6570\uff1a find_usb_camera_node()",(0,i.jsx)(e.br,{}),"\n","\u8be5\u51fd\u6570\u5faa\u73af\u904d\u5386 /dev/video0 \u5230 /dev/video63 \u6765\u67e5\u627e\u6709\u6548\u7684 USB \u6444\u50cf\u5934\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'while (idx < MAX_VID_DEV_CNT) {\r\n    snprintf(appctx->dev_video, sizeof(appctx->dev_video), "/dev/video%d", idx);\r\n    mFd = open(appctx->dev_video, O_RDWR);\r\n    ioctl(mFd, VIDIOC_QUERYCAP, &v2cap);\r\n    if (strcmp((const char *)v2cap.driver, "uvcvideo") == 0) {\r\n        break;\r\n    }\r\n    idx++;\r\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["e. \u521b\u5efa GStreamer \u7ba1\u9053",(0,i.jsx)(e.br,{}),"\n","\u51fd\u6570\uff1a create_preview_pipe()",(0,i.jsx)(e.br,{}),"\n","\u8be5\u51fd\u6570\u6839\u636e\u8f93\u51fa\u7c7b\u578b\uff08\u663e\u793a\u3001\u6587\u4ef6\u6216 RTSP\uff09\u6784\u5efa\u7ba1\u9053\u3002",(0,i.jsx)(e.br,{}),"\n","\u793a\u4f8b\uff1a\u5b9e\u65f6\u9884\u89c8",(0,i.jsx)(e.br,{}),"\n","v4l2src \u2192 capsfilter \u2192 waylandsink",(0,i.jsx)(e.br,{}),"\n","\u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'v4l2src = gst_element_factory_make("v4l2src", "v4l2src");\r\ncapsfilter = gst_element_factory_make("capsfilter", "capsfilter");\r\nwaylandsink = gst_element_factory_make("waylandsink", "waylandsink");\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u793a\u4f8b\uff1a\u4fdd\u5b58\u5230\u6587\u4ef6",(0,i.jsx)(e.br,{}),"\n","v4l2src \u2192 capsfilter \u2192 qtivtransform \u2192 v4l2h264enc \u2192 h264parse \u2192 filesink",(0,i.jsx)(e.br,{}),"\n","\u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'filesink = gst_element_factory_make("filesink", "filesink");\r\nv4l2h264enc = gst_element_factory_make("v4l2h264enc", "v4l2h264enc");\r\nh264parse = gst_element_factory_make("h264parse", "h264parse");\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u793a\u4f8b\uff1aRTSP \u6d41\u5f0f\u4f20\u8f93",(0,i.jsx)(e.br,{}),"\n","v4l2src \u2192 capsfilter \u2192 qtivtransform \u2192 v4l2h264enc \u2192 h264parse \u2192 qtirtspbin"]}),"\n",(0,i.jsxs)(e.p,{children:["f. \u5bf9\u8c61\u68c0\u6d4b\u7ba1\u9053",(0,i.jsx)(e.br,{}),"\n","\u51fd\u6570\uff1a create_pipe()",(0,i.jsx)(e.br,{}),"\n","\u8fd9\u5c06\u6784\u5efa\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u7ba1\u9053\uff0c\u7528\u4e8e\u57fa\u4e8e AI \u7684\u5bf9\u8c61\u68c0\u6d4b\u3002",(0,i.jsx)(e.br,{}),"\n","\u7ba1\u9053\u6d41\u7a0b\uff1a",(0,i.jsx)(e.br,{}),"\n","v4l2src \u2192 capsfilter \u2192 tee \u2192 qtivcomposer \u2192 waylandsink",(0,i.jsx)(e.br,{}),"\n","\u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'qtimlvconverter = gst_element_factory_make("qtimlvconverter", "qtimlvconverter");\r\nqtimlelement = gst_element_factory_make("qtimltflite", "qtimlelement");\r\nqtimlvdetection = gst_element_factory_make("qtimlvdetection", "qtimlvdetection");\r\nqtivcomposer = gst_element_factory_make("qtivcomposer", "qtivcomposer");\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u63d2\u4ef6\u529f\u80fd\u5982\u4e0b\uff1a",(0,i.jsx)(e.br,{}),"\n","\u9884\u5904\u7406\uff1aqtimlvconverter",(0,i.jsx)(e.br,{}),"\n","\u63a8\u7406\uff1aqtimltflite, qtimlsnpe, or qtimlqnn",(0,i.jsx)(e.br,{}),"\n","\u540e\u5904\u7406\uff1aqtimlvdetection",(0,i.jsx)(e.br,{}),"\n","\u53e0\u52a0\uff1aqtivcomposer"]}),"\n",(0,i.jsxs)(e.p,{children:["g. \u4e3b\u51fd\u6570",(0,i.jsx)(e.br,{}),"\n","\u7a0b\u5e8f\u5165\u53e3\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"int main(int argc, char *argv[]) {\r\n    appctx = gst_app_context_new();\r\n    parse_json(config_file, &options, appctx);\r\n    find_usb_camera_node(appctx);\r\n    create_pipe(appctx, &options);\r\n    gst_element_set_state(pipeline, GST_STATE_PAUSED);\r\n    g_main_loop_run(appctx->mloop);\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5b83\u7684\u529f\u80fd\uff1a",(0,i.jsx)(e.br,{}),"\n","\u521d\u59cb\u5316\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587",(0,i.jsx)(e.br,{}),"\n","\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6",(0,i.jsx)(e.br,{}),"\n","\u67e5\u627e USB \u6444\u50cf\u5934",(0,i.jsx)(e.br,{}),"\n","\u6784\u5efa\u7ba1\u9053",(0,i.jsx)(e.br,{}),"\n","\u8fd0\u884c\u4e3b\u5faa\u73af"]}),"\n",(0,i.jsx)(e.p,{children:"h. \u7528\u6237\u53ef\u4ee5\u6839\u636e\u4ee5\u4e0b\u5185\u5bb9\u6765\u66f4\u65b0\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u4e0a\u8ff0\u89e3\u91ca"}),"\n",(0,i.jsxs)(e.li,{children:["\u4ece ",(0,i.jsx)(e.a,{href:"/ubuntu100-cn.github.io/docs/peripherals-and-interfaces/usb#usb-%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD%E9%AA%8C%E8%AF%81",children:(0,i.jsx)(e.strong,{children:"\u83b7\u53d6\u56fe\u7247\u683c\u5f0f\u4e0e\u5c3a\u5bf8"})})," \u83b7\u53d6\u6240\u8fde\u63a5 USB \u6444\u50cf\u5934\u652f\u6301\u7684\u56fe\u50cf\u683c\u5f0f\u548c\u5927\u5c0f\u7684\u8be6\u7ec6\u4fe1\u606f\uff08\u901a\u8fc7yavta\uff09\uff0c\u5e76\u4fee\u6539json\u6216\u6e90\u4ee3\u7801\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"5\ufe0f\u20e3\u7f16\u8bd1\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5de5\u5177\u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u5934\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cd gst-plugins-qti-oss/gst-sample-apps/gst-sample-apps-utils\r\nmkdir build; cd build\r\ncmake \\\r\n   -DGST_VERSION_REQUIRED=1.20.1 \\\r\n   -DSYSROOT_INCDIR=/usr/include \\\r\n   -DSYSROOT_LIBDIR=/usr/lib \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_BINDIR=/usr/bin \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_CONFIG=/etc/configs \\\r\n   -DENABLE_CAMERA=TRUE \\\r\n   -DENABLE_VIDEO_ENCODE=TRUE \\\r\n   -DENABLE_VIDEO_DECODE=TRUE \\\r\n   -DENABLE_DISPLAY=TRUE \\\r\n   -DENABLE_ML=TRUE \\\r\n   -DENABLE_AUDIO=TRUE \\\r\n   -DCAMERA_SERVICE=LECAM \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_INCDIR=/usr/include \\\r\n   ..\r\nmake\r\nmake install\n"})}),"\n",(0,i.jsx)(e.p,{children:"6\ufe0f\u20e3\u8fdb\u5165\u60a8\u60f3\u8981\u4fee\u6539\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e94\u7528\u60a8\u7684\u66f4\u6539\u5e76\u8fdb\u884c\u7f16\u8bd1\u3002\u6b64\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u6784\u5efa\u5bf9\u8c61\u68c0\u6d4b\u5e94\u7528\u7a0b\u5e8f\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cd gst-plugins-qti-oss/gst-sample-apps/gst-ai-object-detection\r\nmkdir build; cd build\r\ncmake \\\r\n   -DGST_VERSION_REQUIRED=1.20.1 \\\r\n   -DSYSROOT_INCDIR=/usr/include \\\r\n   -DSYSROOT_LIBDIR=/usr/lib \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_BINDIR=/usr/bin \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_CONFIG=/etc/configs \\\r\n   -DENABLE_CAMERA=TRUE \\\r\n   -DENABLE_VIDEO_ENCODE=TRUE \\\r\n   -DENABLE_VIDEO_DECODE=TRUE \\\r\n   -DENABLE_DISPLAY=TRUE \\\r\n   -DENABLE_ML=TRUE \\\r\n   -DENABLE_AUDIO=TRUE \\\r\n   -DCAMERA_SERVICE=LECAM \\\r\n   -DGST_PLUGINS_QTI_OSS_INSTALL_INCDIR=/usr/include \\\r\n   ..\r\nmake\r\nmake install\n"})}),"\n",(0,i.jsxs)(e.admonition,{type:"note",children:[(0,i.jsx)(e.mdxAdmonitionTitle,{}),(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u90fd\u9700\u8981\u5355\u72ec\u7f16\u8bd1"})]}),"\n",(0,i.jsx)(e.p,{children:"**7\uff1a**\u8fd0\u884c\u5df2\u7f16\u8bd1\u7684\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"gst-ai-usb-camera-app\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8981\u663e\u793a\u53ef\u7528\u7684\u5e2e\u52a9\u9009\u9879\uff0c\u8bf7\u5728 SSH shell \u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"gst-ai-usb-camera-app -h\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6309",(0,i.jsx)(e.strong,{children:"CTRL + C"}),"\u53ef\u505c\u6b62\u7528\u4f8b**\u3002**"]}),"\n",(0,i.jsx)(e.h3,{id:"\u53c2\u8003\u6587\u6863",children:"\u53c2\u8003\u6587\u6863\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://docs.qualcomm.com/bundle/publicresource/topics/80-90441-15/compile-qim-sample-app.html?product=1601111740057201&facet=AI%20developer%20workflow",children:"AI developer workflow - Ubuntu on Qualcomm\xae IoT Platforms Documentation"})})]})}function p(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>c});var s=r(6540);const i={},l=s.createContext(i);function t(n){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);